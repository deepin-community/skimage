From: =?utf-8?q?Lars_Gr=C3=BCter?= <lagru@mailbox.org>
Date: Tue, 2 Jul 2024 18:43:03 +0200
Subject: Account for np.bincount expecting arch-specific np.intp

in remove_objects_by_distance.
---
 skimage/morphology/misc.py | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/skimage/morphology/misc.py b/skimage/morphology/misc.py
index 0dbcc5e..72efe04 100644
--- a/skimage/morphology/misc.py
+++ b/skimage/morphology/misc.py
@@ -6,7 +6,6 @@ from scipy import ndimage as ndi
 from scipy.spatial import cKDTree
 
 from .._shared.utils import warn
-from .._shared._dependency_checks import is_wasm
 from ._misc_cy import _remove_objects_by_distance
 
 
@@ -402,8 +401,8 @@ def remove_objects_by_distance(
     inner_indices = inner_indices[np.argsort(out_raveled[inner_indices])]
 
     if priority is None:
-        if is_wasm:
-            # bincount expects intp (32-bit) on WASM, so down-cast to that
+        if np.intp().itemsize < out.dtype.itemsize:
+            # bincount expects intp (32-bit) on WASM or i386, so down-cast to that
             priority = np.bincount(out_raveled.astype(np.intp, copy=False))
         else:
             priority = np.bincount(out_raveled)
